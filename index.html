<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Detail of Anyone - Indian Records</title>
    <style>
        :root {
            --primary-color: #ff9933; 
            --accent-color: #138808; 
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --error-color: #ff4d4d;
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Header */
        header {
            background-color: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .header-content {
            text-align: center;
        }

        .header-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-main);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .india-badge {
            display: inline-block;
            background: transparent;
            border: 1px solid var(--text-muted);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 10px;
            color: var(--text-muted);
        }

        /* Main Container */
        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
        }

        .hero-text {
            text-align: center;
            margin-bottom: 2rem;
            max-width: 600px;
        }

        .hero-text h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
            color: white;
        }

        .hero-text p {
            color: var(--text-muted);
            font-size: 1rem;
        }

        /* Tool Container */
        .tool-container {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 600px;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        /* Step Indicators */
        .steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }

        .steps::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #334155;
            transform: translateY(-50%);
            z-index: 0;
        }

        .step {
            width: 30px;
            height: 30px;
            background: #334155;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            color: var(--text-muted);
            z-index: 1;
            transition: var(--transition);
        }

        .step.active {
            background: var(--accent-color);
            color: white;
            box-shadow: 0 0 10px rgba(19, 136, 8, 0.4);
        }

        .step.completed {
            background: var(--accent-color);
            color: white;
        }

        /* Form Sections */
        .form-section {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .form-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
            text-align: center;
            color: white;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            outline: none;
            transition: var(--transition);
            cursor: pointer;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        select option {
            background: #0f172a;
            color: white;
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(19, 136, 8, 0.2);
        }

        /* Checkbox Styling */
        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 1.5rem;
            padding: 10px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            border: 1px solid #334155;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 3px;
            cursor: pointer;
        }

        .checkbox-group label {
            margin-bottom: 0;
            font-size: 0.8rem;
            color: var(--text-muted);
            cursor: pointer;
            line-height: 1.4;
        }

        .btn {
            width: 100%;
            padding: 14px;
            background: var(--primary-color);
            color: #0f172a;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn:hover {
            background: #e68a00;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #334155;
            color: #64748b;
            cursor: not-allowed;
            transform: none;
        }

        .error-msg {
            color: var(--error-color);
            font-size: 0.8rem;
            margin-top: 0.4rem;
            display: none;
        }

        /* Payment Specifics */
        .payment-redirect-area {
            text-align: center;
            margin-bottom: 2rem;
        }

        .price-tag {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 0.5rem;
            display: block;
        }

        .payment-info {
            color: var(--text-muted);
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        /* Razorpay Button Container */
        .razorpay-button-container {
            margin-bottom: 20px;
            text-align: center;
        }

        /* Results Styling */
        .results-container {
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 10px;
            background: #0f172a;
            text-align: left;
        }

        .results-container::-webkit-scrollbar {
            width: 8px;
        }
        .results-container::-webkit-scrollbar-track {
            background: #1e293b; 
        }
        .results-container::-webkit-scrollbar-thumb {
            background: #475569; 
            border-radius: 4px;
        }

        .db-block {
            margin-bottom: 20px;
            border-bottom: 1px solid #334155;
            padding-bottom: 15px;
        }
        .db-block:last-child {
            border-bottom: none;
        }
        .db-title {
            color: var(--primary-color);
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .db-info {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-bottom: 10px;
            font-style: italic;
        }
        .db-data {
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            color: #e2e8f0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .no-data {
            text-align: center;
            color: var(--text-muted);
            padding: 2rem;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
            font-size: 0.8rem;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }
        .disclaimer {
            max-width: 800px;
            margin: 0 auto;
            color: #64748b;
        }

        /* Policy Pages */
        .policy-links {
            margin-top: 1rem;
        }
        .policy-links a {
            color: var(--accent-color);
            text-decoration: none;
            margin: 0 10px;
            font-size: 0.9rem;
        }
        .policy-links a:hover {
            text-decoration: underline;
        }

        .policy-container {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 800px;
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
            margin-bottom: 2rem;
        }

        .policy-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #334155;
            overflow-x: auto;
        }

        .policy-tab {
            padding: 10px 15px;
            cursor: pointer;
            color: var(--text-muted);
            transition: var(--transition);
            white-space: nowrap;
        }

        .policy-tab.active {
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
        }

        .policy-content {
            display: none;
        }

        .policy-content.active {
            display: block;
        }

        .policy-content h3 {
            color: var(--primary-color);
            margin: 1.5rem 0 1rem;
        }

        .policy-content p {
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .policy-content ul {
            margin-left: 20px;
            margin-bottom: 1rem;
        }

        .policy-content li {
            margin-bottom: 0.5rem;
        }

        .back-to-home {
            display: inline-block;
            margin-top: 1.5rem;
            padding: 10px 20px;
            background: var(--accent-color);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: var(--transition);
        }

        .back-to-home:hover {
            background: #0f6e0f;
        }

        /* Contact Form */
        .contact-form {
            margin-top: 1.5rem;
        }

        .contact-info {
            margin-bottom: 2rem;
        }

        .contact-info-item {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .contact-info-item i {
            margin-right: 1rem;
            color: var(--accent-color);
        }

        /* Success Message */
        .success-message {
            background-color: rgba(19, 136, 8, 0.2);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }

        /* Loader */
        .loader {
            border: 3px solid rgba(255,255,255,0.1);
            border-radius: 50%;
            border-top: 3px solid var(--primary-color);
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: none;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Payment Success Notification */
        .payment-success {
            background-color: rgba(19, 136, 8, 0.2);
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
            text-align: center;
        }
    </style>
</head>
<body>

    <header>
        <div class="header-content">
            <div class="header-title">Find Detail of Anyone <span class="india-badge">IN Records Only</span></div>
        </div>
    </header>

    <main id="main-content">
        <div class="hero-text">
            <h1>Find detail of anyone by their mobile number</h1>
            <p>Access Indian citizen records, Leaks & Telegram Info.</p>
        </div>

        <div class="tool-container">
            <!-- Steps Indicator -->
            <div class="steps">
                <div class="step active" id="step-ind-1">1</div>
                <div class="step" id="step-ind-2">2</div>
                <div class="step" id="step-ind-3">3</div>
            </div>

            <!-- Step 1: Input Number & Purpose -->
            <div class="form-section active" id="step-1">
                <h2>Search Indian Database</h2>
                
                <div class="input-group">
                    <label for="mobileInput">Mobile Number (India)</label>
                    <input type="tel" id="mobileInput" placeholder="98765 43210" maxlength="10">
                    <div class="error-msg" id="mobileError">Please enter a valid 10-digit Indian mobile number.</div>
                </div>

                <div class="input-group">
                    <label for="purposeInput">Purpose of Details</label>
                    <select id="purposeInput">
                        <option value="" disabled selected>Select your reason</option>
                        <option value="personal">Personal Reason</option>
                        <option value="enemy">Enemy / Investigation</option>
                        <option value="legal">Legal / Court Case</option>
                        <option value="lost">Lost Contact</option>
                        <option value="other">Other</option>
                    </select>
                    <div class="error-msg" id="purposeError">Please select a reason.</div>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="consentCheck">
                    <label for="consentCheck">I take full responsibility. I understand that I am solely responsible for any action taken using these details and will not use this for illegal purposes.</label>
                </div>
                <div class="error-msg" id="consentError">You must agree to continue.</div>

                <button class="btn" onclick="processStep1()">Search Records</button>
            </div>

            <!-- Step 2: Razorpay Payment -->
            <div class="form-section" id="step-2">
                <h2>Unlock Data</h2>
                
                <div class="payment-redirect-area">
                    <span class="price-tag">‚Çπ159</span>
                    <p class="payment-info">Click below to pay securely. After payment, you'll be automatically redirected to view the data.</p>
                </div>

                <!-- Razorpay Payment Button -->
                <div class="razorpay-button-container">
                    <form>
                        <script src="https://checkout.razorpay.com/v1/payment-button.js" 
                                data-payment_button_id="pl_S9GhMxOGhyYyXn" 
                                data-buttontext="Pay ‚Çπ159 Now"
                                async> 
                        </script> 
                    </form>
                </div>
                
                <div class="payment-success" id="paymentSuccess">
                    Payment successful! Redirecting to your results...
                </div>
            </div>

            <!-- Step 3: API Results -->
            <div class="form-section" id="step-3">
                <h2>Search Results</h2>
                <p class="payment-info" id="loadingText">Fetching data from Telegram...</p>
                <div class="loader" id="apiLoader" style="display: block; margin-bottom: 20px;"></div>
                
                <div class="results-container" id="apiResults" style="display: none;">
                    <!-- API data will be injected here -->
                </div>
            </div>
        </div>
    </main>

    <!-- Policy Pages Section (Hidden by default) -->
    <div id="policy-pages" style="display: none;">
        <div class="policy-container">
            <div class="policy-tabs">
                <div class="policy-tab active" onclick="showPolicy('privacy')">Privacy Policy</div>
                <div class="policy-tab" onclick="showPolicy('terms')">Terms & Conditions</div>
                <div class="policy-tab" onclick="showPolicy('refund')">Refund Policy</div>
                <div class="policy-tab" onclick="showPolicy('cancellation')">Cancellation Policy</div>
                <div class="policy-tab" onclick="showPolicy('shipping')">Shipping Policy</div>
                <div class="policy-tab" onclick="showPolicy('contact')">Contact Us</div>
            </div>

            <!-- Privacy Policy Content -->
            <div id="privacy-policy" class="policy-content active">
                <h2>Privacy Policy</h2>
                <p>Last updated: [Current Date]</p>
                
                <h3>Information We Collect</h3>
                <p>When you use our service, we collect certain information to provide and improve our services:</p>
                <ul>
                    <li>Mobile numbers you search for</li>
                    <li>Purpose of your search</li>
                    <li>Payment information (processed securely through Razorpay)</li>
                    <li>Device information and IP address</li>
                </ul>

                <h3>How We Use Your Information</h3>
                <p>We use the collected information to:</p>
                <ul>
                    <li>Provide search results from public databases</li>
                    <li>Process payments for our services</li>
                    <li>Improve our service quality</li>
                    <li>Comply with legal obligations</li>
                </ul>

                <h3>Data Protection</h3>
                <p>We implement appropriate security measures to protect your personal information. However, no method of transmission over the internet is 100% secure.</p>

                <h3>Legal Compliance</h3>
                <p>Our service complies with the Digital Personal Data Protection Act (DPDPA) guidelines and other applicable Indian laws regarding data protection.</p>

                <h3>Third-Party Services</h3>
                <p>We use Razorpay for payment processing. Please review Razorpay's privacy policy for information on how they handle payment information.</p>

                <h3>Contact Us</h3>
                <p>If you have questions about this Privacy Policy, please contact us at [your contact information].</p>
            </div>

            <!-- Terms and Conditions Content -->
            <div id="terms-policy" class="policy-content">
                <h2>Terms and Conditions</h2>
                <p>Last updated: [Current Date]</p>
                
                <h3>Acceptance of Terms</h3>
                <p>By accessing and using our service, you accept and agree to be bound by the terms and provision of this agreement.</p>

                <h3>Service Description</h3>
                <p>Our service provides access to publicly available data aggregates related to Indian citizens based on mobile number searches.</p>

                <h3>User Responsibilities</h3>
                <p>As a user, you agree to:</p>
                <ul>
                    <li>Use the service only for lawful purposes</li>
                    <li>Take full responsibility for any actions taken using the information provided</li>
                    <li>Not use the service for harassment, stalking, or any illegal activities</li>
                    <li>Provide accurate information when using our service</li>
                </ul>

                <h3>Payment Terms</h3>
                <p>Payment for our services is processed through Razorpay. By making a payment, you agree to Razorpay's terms of service.</p>

                <h3>Limitation of Liability</h3>
                <p>We are not liable for any damages arising from your use of the information provided through our service.</p>

                <h3>Termination</h3>
                <p>We reserve the right to terminate or suspend access to our service immediately, without prior notice or liability, for any reason whatsoever.</p>

                <h3>Governing Law</h3>
                <p>These terms shall be governed by and construed in accordance with the laws of India.</p>
            </div>

            <!-- Refund Policy Content -->
            <div id="refund-policy" class="policy-content">
                <h2>Refund Policy</h2>
                <p>Last updated: [Current Date]</p>
                
                <h3>Refund Eligibility</h3>
                <p>Refunds may be considered in the following circumstances:</p>
                <ul>
                    <li>If the service was not delivered as promised</li>
                    <li>If there was a technical issue on our end that prevented you from accessing the service</li>
                    <li>If you were charged incorrectly</li>
                </ul>

                <h3>Refund Process</h3>
                <p>To request a refund, please contact our support team at [your contact information] within 7 days of your payment. Include your transaction ID and reason for the refund request.</p>

                <h3>Refund Timeline</h3>
                <p>Once approved, refunds will be processed within 5-7 business days. The refund will be credited to your original payment method.</p>

                <h3>Non-Refundable Cases</h3>
                <p>Refunds will not be provided if:</p>
                <ul>
                    <li>The service was delivered as described</li>
                    <li>No data was found for the searched mobile number (as this is a legitimate search result)</li>
                    <li>The request is made after 7 days from the payment date</li>
                </ul>
            </div>

            <!-- Cancellation Policy Content -->
            <div id="cancellation-policy" class="policy-content">
                <h2>Cancellation Policy</h2>
                <p>Last updated: [Current Date]</p>
                
                <h3>Service Cancellation</h3>
                <p>Once a payment is made and the search is initiated, the service cannot be cancelled as it involves accessing and processing data from multiple databases.</p>

                <h3>Account Cancellation</h3>
                <p>If you wish to close your account with us, please contact our support team at [your contact information]. We will process your request within 48 hours.</p>

                <h3>Effect of Cancellation</h3>
                <p>Upon account cancellation:</p>
                <ul>
                    <li>You will lose access to any search history or saved results</li>
                    <li>We may retain certain information as required by law</li>
                    <li>Any pending searches will be completed before closure</li>
                </ul>
            </div>

            <!-- Shipping Policy Content -->
            <div id="shipping-policy" class="policy-content">
                <h2>Shipping Policy</h2>
                <p>Last updated: [Current Date]</p>
                
                <h3>Digital Service</h3>
                <p>Our service is entirely digital and does not involve physical shipping. All search results and reports are delivered electronically through our website.</p>

                <h3>Delivery Time</h3>
                <p>Once payment is verified, search results are typically available within minutes. In rare cases of high server load or technical issues, delivery may take up to 24 hours.</p>

                <h3>Access to Results</h3>
                <p>Results are accessible through your account on our website for a period of 30 days from the date of the search. After this period, you may need to perform a new search to access the information again.</p>

                <h3>Technical Requirements</h3>
                <p>To access our service and view results, you need:</p>
                <ul>
                    <li>A modern web browser (Chrome, Firefox, Safari, Edge)</li>
                    <li>Stable internet connection</li>
                    <li>JavaScript enabled in your browser</li>
                </ul>
            </div>

            <!-- Contact Us Content -->
            <div id="contact-policy" class="policy-content">
                <h2>Contact Us</h2>
                <p>We value your feedback and are here to assist you with any questions or concerns.</p>
                
                <div class="contact-info">
                    <div class="contact-info-item">
                        <i>üìß</i>
                        <span>Email: support@indiandatatrace.com</span>
                    </div>
                    <div class="contact-info-item">
                        <i>üìû</i>
                        <span>Phone: +91 98765 43210</span>
                    </div>
                    <div class="contact-info-item">
                        <i>üïê</i>
                        <span>Business Hours: Monday to Friday, 9:00 AM - 6:00 PM IST</span>
                    </div>
                </div>

                <h3>Send Us a Message</h3>
                <div class="success-message" id="contactSuccess">
                    Your message has been sent successfully. We will get back to you soon.
                </div>
                <form class="contact-form" onsubmit="submitContactForm(event)">
                    <div class="input-group">
                        <label for="contactName">Your Name</label>
                        <input type="text" id="contactName" required>
                    </div>
                    <div class="input-group">
                        <label for="contactEmail">Email Address</label>
                        <input type="email" id="contactEmail" required>
                    </div>
                    <div class="input-group">
                        <label for="contactSubject">Subject</label>
                        <input type="text" id="contactSubject" required>
                    </div>
                    <div class="input-group">
                        <label for="contactMessage">Message</label>
                        <textarea id="contactMessage" required></textarea>
                    </div>
                    <button type="submit" class="btn">Send Message</button>
                </form>
            </div>

            <a href="#" class="back-to-home" onclick="showMainContent()">Back to Home</a>
        </div>
    </div>

    <footer>
        <div class="disclaimer">
            <p><strong>Legal Disclaimer:</strong> This platform provides access to publicly available data aggregates. By using this service, you agree to the Digital Personal Data Protection Act (DPDPA) guidelines. You are solely responsible for the use of the information provided. We do not encourage harassment or illegal stalking.</p>
            <br>
            <div class="policy-links">
                <a href="#" onclick="showPolicyPage('privacy')">Privacy Policy</a>
                <a href="#" onclick="showPolicyPage('terms')">Terms & Conditions</a>
                <a href="#" onclick="showPolicyPage('refund')">Refund Policy</a>
                <a href="#" onclick="showPolicyPage('cancellation')">Cancellation Policy</a>
                <a href="#" onclick="showPolicyPage('shipping')">Shipping Policy</a>
                <a href="#" onclick="showPolicyPage('contact')">Contact Us</a>
            </div>
            <br>
            <p>&copy; 2023 Indian Data Trace Services.</p>
        </div>
    </footer>

    <script>
        // CONFIGURATION
        const WEB3FORMS_KEY = "7a459492-80a0-4750-adfa-d999f49adaa1";
        const LEAKOSINT_TOKEN = "7599106117:Rz3mvkCq"; 
        const TELEGRAM_TOKEN = "7785043730:HskjY9ci"; 
        const API_URL = "https://leakosintapi.com/";
        // Using CORS Proxy to bypass Network/CORS restriction
        const CORS_PROXY = "https://corsproxy.io/?"; 

        // State
        let currentStep = 1;
        let searchData = {
            mobile: "",
            purpose: ""
        };

        // Elements
        const stepIndicators = [
            document.getElementById('step-ind-1'),
            document.getElementById('step-ind-2'),
            document.getElementById('step-ind-3')
        ];
        const formSections = [
            document.getElementById('step-1'),
            document.getElementById('step-2'),
            document.getElementById('step-3')
        ];

        // Inputs
        const mobileInput = document.getElementById('mobileInput');
        const purposeInput = document.getElementById('purposeInput');
        const consentCheck = document.getElementById('consentCheck');

        // UI Containers
        const apiResults = document.getElementById('apiResults');
        const loadingText = document.getElementById('loadingText');
        const apiLoader = document.getElementById('apiLoader');
        const paymentSuccess = document.getElementById('paymentSuccess');

        // Update UI Step
        function updateStep(step) {
            stepIndicators.forEach((ind, index) => {
                if (index + 1 < step) {
                    ind.classList.add('completed');
                    ind.classList.remove('active');
                    ind.innerHTML = '‚úì';
                } else if (index + 1 === step) {
                    ind.classList.add('active');
                    ind.classList.remove('completed');
                    ind.innerHTML = index + 1;
                } else {
                    ind.classList.remove('active', 'completed');
                    ind.innerHTML = index + 1;
                }
            });

            formSections.forEach((sec, index) => {
                sec.classList.remove('active');
                if (index + 1 === step) {
                    sec.classList.add('active');
                }
            });
        }

        // Save to Web3Forms
        async function saveToDatabase(data) {
            const formData = new FormData();
            formData.append('access_key', WEB3FORMS_KEY);
            formData.append('subject', 'New Request: ' + data.mobile);
            formData.append('from_name', 'Website User');
            formData.append('message', `Mobile: ${data.mobile}\nPurpose: ${data.purpose}`);

            try {
                await fetch('https://api.web3forms.com/submit', {
                    method: 'POST',
                    body: formData
                });
            } catch (e) { console.log("DB Log Error", e); }
        }

        // Step 1: Validate Input
        function processStep1() {
            let isValid = true;
            document.getElementById('mobileError').style.display = 'none';
            document.getElementById('mobileError').innerText = "Please enter a valid 10-digit Indian mobile number.";
            document.getElementById('purposeError').style.display = 'none';
            document.getElementById('consentError').style.display = 'none';

            const mobileVal = mobileInput.value.trim().replace(/\D/g, ''); 

            // PROTECTED NUMBER CHECK
            if (mobileVal === "6204341040") {
                document.getElementById('mobileError').innerText = "It is protected. Can't show data of this user.";
                document.getElementById('mobileError').style.display = 'block';
                return;
            }

            const mobileRegex = /^[6-9]\d{9}$/;
            if (!mobileRegex.test(mobileVal)) {
                document.getElementById('mobileError').style.display = 'block';
                isValid = false;
            }

            if (purposeInput.value === "") {
                document.getElementById('purposeError').style.display = 'block';
                isValid = false;
            }

            if (!consentCheck.checked) {
                document.getElementById('consentError').style.display = 'block';
                isValid = false;
            }

            if (isValid) {
                searchData.mobile = mobileVal;
                searchData.purpose = purposeInput.value;

                const btn = document.querySelector('#step-1 .btn');
                btn.innerText = 'Checking...';
                btn.disabled = true;

                saveToDatabase(searchData);

                setTimeout(() => {
                    btn.innerText = 'Search Records';
                    btn.disabled = false;
                    currentStep = 2;
                    updateStep(currentStep);
                }, 1000);
            }
        }

        // Handle Razorpay payment success
        window.addEventListener('load', function() {
            // Override the Razorpay payment button handler
            const originalRazorpayHandler = window.Razorpay && window.Razorpay.onPaymentSuccess;
            
            // Listen for payment success events
            document.addEventListener('payment.success', function(event) {
                handlePaymentSuccess();
            });
            
            // Check URL parameters for payment success
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('payment') === 'success') {
                handlePaymentSuccess();
            }
        });

        // Handle payment success
        function handlePaymentSuccess() {
            // Show payment success message
            paymentSuccess.style.display = 'block';
            
            // Move to step 3 after a short delay
            setTimeout(() => {
                currentStep = 3;
                updateStep(currentStep);
                fetchTelegramData(searchData.mobile);
            }, 2000);
        }

        // Step 3: Fetch Telegram Data
        async function fetchTelegramData(number) {
            apiResults.style.display = 'none';
            loadingText.style.display = 'block';
            loadingText.innerText = "Fetching data from Telegram...";
            apiLoader.style.display = 'block';

            const payload = {
                request: number,
                limit: 100,
                lang: "en"
            };

            try {
                // Fetch data from Telegram API
                const req = fetch(CORS_PROXY + encodeURIComponent(API_URL), {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'x-requested-with': 'XMLHttpRequest'
                    },
                    body: JSON.stringify({ ...payload, token: TELEGRAM_TOKEN })
                });

                const res = await req;
                const data = await res.json();
                
                // Handle Proxy wrappers if any
                const json = data.contents || data;
                
                displayResults({ List: json.List });

            } catch (error) {
                console.error("API Error:", error);
                loadingText.innerText = "Error fetching data. The Proxy server might be busy. Try again in a moment.";
                loadingText.style.color = "var(--error-color)";
                apiLoader.style.display = 'none';
            }
        }

        function displayResults(data) {
            apiLoader.style.display = 'none';
            apiResults.style.display = 'block';
            apiResults.innerHTML = ''; 

            if (data.Error) {
                apiResults.innerHTML = `<div class="no-data"><p style="color:var(--error-color)">Error: ${data.Error}</p></div>`;
                return;
            }

            const resultsList = data.List;
            if (!resultsList || Object.keys(resultsList).length === 0) {
                apiResults.innerHTML = `<div class="no-data"><p>No data found in Telegram database.</p></div>`;
                return;
            }

            let count = 0;
            for (const dbName in resultsList) {
                const entry = resultsList[dbName];
                if (dbName === "No results found") continue;

                const block = document.createElement('div');
                block.className = 'db-block';

                let dataHtml = "";
                if (entry.Data && Array.isArray(entry.Data)) {
                    entry.Data.forEach(item => {
                        const itemString = Object.entries(item).map(([key, val]) => `<b>${key}</b>: ${val}`).join('\n');
                        dataHtml += `<div class="db-data">${itemString}</div><br>`;
                    });
                }

                block.innerHTML = `
                    <div class="db-title">${dbName}</div>
                    <div class="db-info">${entry.InfoLeak || "Data found"}</div>
                    ${dataHtml}
                `;
                apiResults.appendChild(block);
                count++;
            }

            if (count === 0) {
                apiResults.innerHTML = `<div class="no-data">No specific matches found in Telegram database.</div>`;
            }
        }

        // Policy Page Functions
        function showPolicyPage(policyType) {
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('policy-pages').style.display = 'block';
            
            // Show the specific policy tab
            showPolicy(policyType || 'privacy');
            
            window.scrollTo(0, 0);
        }

        function showMainContent() {
            document.getElementById('main-content').style.display = 'flex';
            document.getElementById('policy-pages').style.display = 'none';
            window.scrollTo(0, 0);
        }

        function showPolicy(policyType) {
            // Hide all policy content
            document.querySelectorAll('.policy-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.policy-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected policy content
            document.getElementById(`${policyType}-policy`).classList.add('active');
            
            // Add active class to selected tab
            const activeTab = Array.from(document.querySelectorAll('.policy-tab')).find(
                tab => tab.getAttribute('onclick').includes(policyType)
            );
            if (activeTab) {
                activeTab.classList.add('active');
            }
        }

        // Contact Form Submission
        async function submitContactForm(event) {
            event.preventDefault();
            
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const subject = document.getElementById('contactSubject').value;
            const message = document.getElementById('contactMessage').value;
            
            const formData = new FormData();
            formData.append('access_key', WEB3FORMS_KEY);
            formData.append('subject', subject);
            formData.append('from_name', name);
            formData.append('email', email);
            formData.append('message', message);
            
            try {
                await fetch('https://api.web3forms.com/submit', {
                    method: 'POST',
                    body: formData
                });
                
                // Show success message
                document.getElementById('contactSuccess').style.display = 'block';
                
                // Reset form
                document.getElementById('contactName').value = '';
                document.getElementById('contactEmail').value = '';
                document.getElementById('contactSubject').value = '';
                document.getElementById('contactMessage').value = '';
                
                // Hide success message after 5 seconds
                setTimeout(() => {
                    document.getElementById('contactSuccess').style.display = 'none';
                }, 5000);
            } catch (e) { 
                console.log("Contact Form Error", e);
                alert('There was an error submitting your message. Please try again.');
            }
        }
    </script>
</body>
</html>
